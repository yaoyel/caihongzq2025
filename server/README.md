# 天赋测评系统后端服务

## 数据库相关命令说明

项目中包含以下数据库管理命令：

### 数据库迁移命令

- `npm run migration:generate` - 生成数据库迁移文件
  - 根据实体模型的变化自动生成迁移文件
  - 迁移文件保存在 `src/migrations/auto` 目录下
  - 适用于需要追踪数据库变更的生产环境

- `npm run migration:run` - 执行数据库迁移
  - 执行所有未执行的迁移文件
  - 按时间顺序依次执行迁移
  - 用于将数据库结构与最新的实体模型保持同步

- `npm run migration:revert` - 回滚数据库迁移
  - 回滚最近一次执行的迁移
  - 用于迁移出错时进行恢复
  - 建议在执行迁移前备份数据库

### 数据库架构命令

⚠️ 以下命令具有破坏性，请谨慎使用：

- `npm run schema:sync` - 同步数据库架构
  - 直接将数据库结构强制同步为当前实体定义
  - 可能导致数据丢失
  - 仅建议在开发环境使用

- `npm run schema:drop` - 删除数据库架构
  - 删除数据库中的所有表和数据
  - 完全清空数据库
  - 仅用于开发环境重置数据库

## 最佳实践建议

1. 在生产环境中：
   - 始终使用迁移命令（migration）来管理数据库变更
   - 每次变更前备份数据库
   - 严禁使用 schema:sync 和 schema:drop 命令

2. 在开发环境中：
   - 可以使用 schema:sync 快速同步开发数据库
   - 建议在开发新功能时，养成使用迁移的习惯
   - 定期清理测试数据 